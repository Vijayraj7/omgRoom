<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

<script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.js"></script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OMG ROOM</title>
    <link rel="stylesheet" href="home.css">
    <link rel="icon" href="omg.jpg">
    <script src="S1/s1.js"></script>
    <script src="S1/s1day1.js"></script>
    <script src="S1/s1day2.js"></script>
    <script src="S1/s1day3.js"></script>
    <script src="S1/s1day3.js"></script>
    <script src="S1/s1day4.js"></script>
    <script src="S1/s1day5.js"></script>
    <script src="S1/s1day6.js"></script>
    <style>
        .downloadtable {
            margin-top: 40px;
            padding: 20px;
        }
    </style>
</head>

<body>
    <div id="m">
        <nav>
            <div id="nav">
                <div id="logo">
                    <div id="logocircle">

                        <img src="omg.jpg" height="50px" width="50px">

                    </div>
                </div>
                <div id="logoname">
                    <h1>√òMG‰∏®DAILY ROOM MATCH‚öîÔ∏è</h1>
                </div>
            </div>
        </nav>
        <section>

            <div id="pName">

                <h1>POINT TABLE</h1>

            </div>

            <div id="ptablediv">


                <div id="ptable">
                    <table id="mani">
                        <tr id="head">
                            <th>Rank</th>
                            <th>Clan</th>
                            <th>M</th>
                            <th>W</th>
                            <th>P</th>
                            <th>K</th>
                            <th>Total</th>
                        </tr>

                    </table>


                </div>

            </div>




        </section>


    </div>
    <div id="btnc">
        <button id="btn" class="downloadtable" onclick="downloadtable()">DOWNLOAD</button>
        <button id="btng"><a href="https://chat.whatsapp.com/L7vPazGI4KZGTSWBPPabtI">JOIN</a></button>
    </div>
    <div id="foots"></div>
    <div id="footer">

        <h1>
            TEAM OMG
        </h1>

    </div>

    <div id="bestp">
        <h5>BEST PLAYER</h5>
        <h4>Ô∏ª„Éá‚ïê‰∏Ä</h4>
        <h3>DMENMacrOcrd</h3>
    </div>


    <div id="winnercont">


        <div id="firstdid">
            <div><h3>1</h3></div>
            <h3>BEAST 12 OFFICIAL</h3>
        </div>

        <div id="seconddid">
            <div><h3>2</h3></div>
            <h3>DMEN</h3>
        </div>

        <div id="thirdid">
            <div><h3>3</h3></div>
            <h3>OMG</h3>
        </div>


    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>

</body>





<!-- coding -->
<script>




    var listsofresults = Array();

    listsofresults.push(s1resultsday1);
    listsofresults.push(s1resultsday2);
    listsofresults.push(s1resultsday3);
    listsofresults.push(s1resultsday4);
    listsofresults.push(s1resultsday5);
    listsofresults.push(s1resultsday6);

    listsofresults.forEach(function (results, index, array) {
        for (let i = 0; i < s1results.length; i++) {
            s1results[i].MatchesPlayed = parseInt(s1results[i].MatchesPlayed) + parseInt(results[i].MatchesPlayed);
            s1results[i].WIN = parseInt(s1results[i].WIN) + parseInt(results[i].WIN);
            s1results[i].PLACEPOINTS = parseInt(s1results[i].PLACEPOINTS) + parseInt(results[i].PLACEPOINTS);
            s1results[i].KILLPOINTS = parseInt(s1results[i].KILLPOINTS) + parseInt(results[i].KILLPOINTS);
            s1results[i].TOTAL = parseInt(s1results[i].TOTAL) + parseInt(results[i].TOTAL);
        }

    });


    s1results.sort(function (a, b) {
        return b.MatchesPlayed - a.MatchesPlayed;
    });

    s1results.sort(function (a, b) {
        return b.TOTAL - a.TOTAL;
    });

    window.onscroll = function (ev) {
        if (window.scrollY > 0) {
            document.getElementById('bestp').style.visibility = 'hidden';
        } else {
            document.getElementById('bestp').style.visibility = 'visible';
        }
    };


    for (let index = 0; index < s1results.length; index++) {

        tr = document.createElement('tr');

        document.getElementById('mani').appendChild(tr);
        tr.classList.add('contents');
        let r = document.createElement('td');
        let c = document.createElement('td');
        let m = document.createElement('td');
        let w = document.createElement('td');
        let p = document.createElement('td');
        let k = document.createElement('td');
        let t = document.createElement('td');

        tr.appendChild(r);
        tr.appendChild(c);
        tr.appendChild(m);
        tr.appendChild(w);
        tr.appendChild(p);
        tr.appendChild(k);
        tr.appendChild(t);
        if (index == 0) {
            r.innerText = 'üëë';
        } else {
            r.innerText = index + 1;
        }
        c.innerText = s1results[index]['clan'];
        m.innerText = s1results[index]['MatchesPlayed'] == '0' ? '' : s1results[index]['MatchesPlayed'];
        w.innerText = s1results[index]['WIN'] == '0' ? '' : s1results[index]['WIN'];
        p.innerText = s1results[index]['PLACEPOINTS'] == '0' ? '' : s1results[index]['PLACEPOINTS'];
        k.innerText = s1results[index]['KILLPOINTS'] == '0' ? '' : s1results[index]['KILLPOINTS'];
        t.innerText = s1results[index]['TOTAL'];
        t.style.color = 'green';
        t.style.fontWeight = 'bold';

        tr.id = 's' + index.toString();

    }



    function downloadtable() {

        var node = document.getElementById('m');

        domtoimage.toPng(node)
            .then(function (dataUrl) {
                var img = new Image();
                img.src = dataUrl;
                downloadURI(dataUrl, "records.png")
            })
            .catch(function (error) {
                console.error('oops, something went wrong!', error);
            });

    }



    function downloadURI(uri, name) {
        var link = document.createElement("a");
        link.download = name;
        link.href = uri;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        delete link;
    }
    function sortTable(table, col, reverse) {
        var tb = table.tBodies[0], // use `<tbody>` to ignore `<thead>` and `<tfoot>` rows
            tr = Array.prototype.slice.call(tb.rows, 0), // put rows into array
            i;
        reverse = -((+reverse) || -1);
        tr = tr.sort(function (a, b) { // sort rows
            return reverse // `-1 *` if want opposite order
                * (a.cells[col].textContent.trim() // using `.textContent.trim()` for test
                    .localeCompare(b.cells[col].textContent.trim())
                );
        });
        for (i = 0; i < tr.length; ++i) tb.appendChild(tr[i]); // append each row in order
    }


</script>

</html>
